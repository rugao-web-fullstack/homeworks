<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
    <div class="index">
        <h1 name="H" id="H"> &nbsp;登 &nbsp; 录 &nbsp;</h1>
        <form action="#" method="post">
            <div>
                <label>用户名：</label>
                <input type="text" id='username' name='username'>
            </div>
            <div>
                <label>密&nbsp;&nbsp;码：</label>
                <input type="password" id='password' name='password'>
            </div>
            <!--<input type="submit" value="登录" class="Sub">-->
            <input class="Sub" id="submit" type="button" value="登录">
        </form>
    </div>


    <script src="http://cdn.static.runoob.com/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>
        $(function () {
            //提交登录数据
            $('#submit').click(function () {
                if ($('#username').val() && $('#password').val()) {
                    var user = $('#username').val();
                    var pwd = $('#password').val();
                    //ajax请求
                    $.ajax({
                        url: '/api/users',
                        data: {
                            action: 'login',
                            username: user,
                            password: pwd,
                        },
                        type: 'post',
                        success: function (data, status) {
                            //获取data
                            if (data !== '0') {
                                location.href = data;
                                return;
                            } else {
                                alert('用户名或者密码错误！');
                            }
                            console.log(data);
                        },
                        error: function (data, err) {
                            console.log('ajax请求失败');
                            return;
                        }
                    });
                } else {
                    alert('请填写完整！');
                };
            })
        })
    </script>
</body>

</html>